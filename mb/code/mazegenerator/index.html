<!DOCTYPE html>
<html>
  <head>
    <title>Maze generator</title>
    
    <!-- include jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js">
    </script>
    
    <!-- include Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" 
      integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous">
    </script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" 
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    
    <style>
    
      body {
        width: 95%;
        margin: 10px;
      }
      
      #mazeout td {
        border: 1px solid black;
        height: 10px;
        width: 10px;
        background-color: white;
      }
      
      #mazeout td.n {
        border-top: 1px solid white;
      }
      
      #mazeout td.s {
        border-bottom: 1px solid white;
      }
      
      #mazeout td.e {
        border-right: 1px solid white;
      }
      
      #mazeout td.w {
        border-left: 1px solid white;
      }
      
      #mazecanvas canvas {
        background-color: #fff;
      }
      
    </style>
  </head>

  <body>
    <div id="mazeout"></div>
    <canvas id="mazecanvas" width=0 height=0></canvas>
    
    <script src="cell.js"></script>
    <script src="maze.js"></script>
    <script src="backtracker.js"></script>
    
    <script>
      /* todo: fix overdrawing walls, just draw N & E?
       * add djikstra's, solver
       * animate algorithm help:
       * http://stackoverflow.com/questions/17719662/animating-a-recursive-backtracking-algorithm-in-javascript
       * http://stackoverflow.com/questions/29588816/animate-javascript-canvas-while-in-recursive-calculation
       */
      
      // grab canvas and context from DOM
      let canvas = document.getElementById("mazecanvas");
      let ctx = canvas.getContext("2d");
    
      // declare variables
      let grid = 7;
      let width = 100;
      let height = 60;
      let animate = true;
      let animationSpeed = 1;
      let maze;
      let animStates = [];
      
      maze = new Maze(width, height);
      maze.init();
      maze.grid[0][0].n = true;
      maze.grid[maze.height - 1][maze.width - 1].s = true;
      document.getElementById("mazeout").innerHTML = maze.toHTML();
      new Backtracker().carve(maze);
      
      if (animate) {
        let interval = setInterval(function() {
          //animStates.shift().draw();
          if (animStates.length > 0) {
            let frame = animStates.shift();
            document.getElementById(frame[0]).className = frame[1].getClass();
          }
          else {
            clearInterval(interval);
          }
        }, animationSpeed);
      }
      else {
        document.getElementById("mazeout").innerHTML = maze.toHTML();
      }
      
    </script>
  </body>
</html>