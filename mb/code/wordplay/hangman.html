<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Hangman</title>
    
    <style>
      body {
        font-family: monospace, "lucida console";
        font-size: 20px;
      }
    </style>
    
  </head>
  <body onload="initialize();">
    
    <h3>Hangman</h3>
    
    <div id="hangmanoutput"></div>
    <br>
    <input id="guess" size="2">
    <button onclick="guess();">Guess</button>
    <br><br>
    <div id="victorymessage"></div>
    
    <script>
    
      /* A simple hangman game
       *
       * Todos: 
       * - load a dictionary of words from a file.
       * - stop game if user doesn't guess word in a 
       *   minimum number of guesses.
       * - implement "enter" to submit.
       */
       
      let possibleWords = [
        "hippopottamus", "hyena", "caterpillar", "buzzard",
        "capybara", "wolf", "falcon", "panda", "alligator",
        "starfish", "vulture", "sparrow", "zebra", "monkey",
        "crocodile", "giraffe", "lion", "piranha", "whale"
      ];
      
      // declare variables
      let word;
      let hidden;
      let numGuesses;
      
      // sets up a new game of hangman
      function initialize() {
        
        // initialize variables
        hidden = [];
        numGuesses = 0;
        
        // grab a random word from the possible words array
        let randIndex = Math.floor(Math.random() * possibleWords.length);
        word = possibleWords[randIndex];
      
        // load the hidden array with dots up to the length of the word
        for (let i = 0; i < word.length; i++) {
          hidden.push(".");
        }
        
        // show the hidden word
        toDOM("hangmanoutput", hidden.join(""));
      }
      
      // handles user's guess
      function guess() {
      
        // clear the victory message
        toDOM("victorymessage", "");
      
        // grab guess from the DOM
        let guess = document.getElementById("guess").value;
        
        // validate guess
        if (guess && isNaN(guess)) {
          
          // check every letter in the word against the guess
          for (let i = 0; i < word.length; i++) {
          
            // if we find a match for this character in the word
            // put it in the hidden word at that index
            if (word.charAt(i) === guess) {
              hidden[i] = guess;
            }
          }
          
          // increment the total number of guesses
          numGuesses++;
          
          // write the hidden word to the output
          toDOM("hangmanoutput", hidden.join(""));
          
          // check if the word was successfully guessed
          if (hidden.join("") === word) {
            toDOM("victorymessage", "You guessed " + 
              word + " in " + numGuesses + " guesses!");
              
            // start a new round
            initialize();
          }
        }
      }
        
      // puts a string of HTML content into a DOM element
      function toDOM(element, content) {
        document.getElementById(element).innerHTML = content;
      }
      
    </script>
    
  </body>
</html>